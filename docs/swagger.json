{"info":{"description":"S-Plan","title":"S-Plan","version":"2.0.0","author":"Nils Witt"},"host":"localhost:3000","basePath":"","produces":["application/json"],"schemes":["https"],"securityDefinitions":{"JWT":{"type":"apiKey","in":"header","name":"Authorization","description":""}},"swagger":"2.0","paths":{"/announcements/":{"post":{"parameters":[{"name":"Announcement","in":"body","description":null,"required":true,"schema":{"$ref":"#/definitions/Announcement"}}],"description":"Adds a new Announcement","tags":["Announcements"],"responses":{"200":{"description":"Success"},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]},"get":{"parameters":[],"description":"Lists all Announcements","tags":["Announcements"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/Announcement"}}},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]}},"/announcements/id/{id}":{"put":{"parameters":[],"description":"Updates Announcement {id}","tags":["Announcements"],"responses":{"200":{"description":"Success"},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]},"get":{"parameters":[],"description":"Returns Announcement {id}","tags":["Announcements"],"responses":{"200":{"description":"Success"},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]},"delete":{"parameters":[],"description":"Deletes Announcement {id}","tags":["Announcements"],"responses":{"200":{"description":"Success"},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]}},"/courses":{"get":{"parameters":[],"description":"Returns all courses","tags":["Courses"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/Course"}}},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]}},"/courses/find/":{"post":{"parameters":[{"name":"CourseSearch","in":"body","description":null,"required":true,"schema":{"$ref":"#/definitions/CourseSearch"}}],"description":"Searches for Courses","tags":["Courses"],"responses":{"200":{"description":"Success","schema":{"type":"array","items":{"$ref":"#/definitions/Course"}}},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]}},"/courses/":{"delete":{"parameters":[],"description":"Deletes all courses","tags":["Courses"],"responses":{"200":{"description":"Success"},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]}},"/courses/id/:id":{"get":{"parameters":[],"description":"Returns the given course","tags":["Courses"],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/Course"}},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]},"delete":{"parameters":[],"description":"Deletes the given course","tags":["Courses"],"responses":{"200":{"description":"Success"},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]}},"/courses/moodle/sync":{"get":{"parameters":[],"description":"Triggers a sync of all courses with moodle","tags":["Courses"],"responses":{"200":{"description":"Success"},"401":{"description":"Wrong Credentials"}},"security":[{"JWT":[]}]}},"/exams/":{"get":{"parameters":[],"description":"Returns all Exams","tags":["Exams"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/Exam"}}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]},"post":{"parameters":[{"name":"Exam","in":"body","description":null,"required":false,"schema":{"$ref":"#/definitions/Exam"}}],"description":"Adds a new Exam","tags":["Exams"],"responses":{"200":{"description":"Success"},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/exams/id/{id}":{"get":{"parameters":[],"description":"Return the Exam if found","tags":["Exams"],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/Exam"}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]},"delete":{"parameters":[],"description":"Deletes an Exam","tags":["Exams"],"responses":{"200":{"description":"Success"},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/lessons":{"get":{"parameters":[],"description":"Returns all available lessons","tags":["Lessons"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/Lesson"}}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]},"post":{"parameters":[{"name":"Lesson","in":"body","description":null,"required":true,"schema":{"$ref":"#/definitions/Lesson"}}],"description":"Adds Lessons","tags":["Lessons"],"responses":{"200":{"description":"Success"},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/replacementLessons/":{"post":{"parameters":[{"name":"ReplacementLesson","in":"body","description":null,"required":true,"schema":{"$ref":"#/definitions/ReplacementLesson"}}],"description":"Adds an ReplacementLesson","tags":["ReplacementLesson"],"responses":{"200":{"description":"Success"},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]},"get":{"parameters":[],"description":"Returns all ReplacementLessons","tags":["ReplacementLesson"],"responses":{"200":{"description":"Success","schema":{"type":"array","items":{"$ref":"#/definitions/ReplacementLesson"}}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/replacementLessons/date/{date}":{"get":{"parameters":[],"description":"Returns all ReplacementLessons on specific date","tags":["ReplacementLesson"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/ReplacementLesson"}}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/replacementLessons/id/{id}":{"get":{"parameters":[],"description":"Gets a ReplacementLesson by id","tags":["ReplacementLesson"],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/ReplacementLesson"}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]},"delete":{"parameters":[],"description":"Deletes an ReplacementLesson by id","tags":["ReplacementLesson"],"responses":{"200":{"description":"Success"},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/user/":{"get":{"parameters":[],"description":"Return the current user","tags":["User"],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/User"}},"401":{"description":"Wrong JWT"}},"security":[{"JWT":[]}]}},"/user/login":{"post":{"parameters":[{"name":"LoginRequest","in":"body","description":"username","required":true,"schema":{"$ref":"#/definitions/LoginRequest"}}],"description":"Return the JWT to access the Api","tags":["User"],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/LoginResponse"}},"401":{"description":"Wrong Bearer"},"602":{"description":"missing secondFactor"}},"consumes":["application/json"]}},"/user/courses":{"get":{"parameters":[],"description":"List all courses for the user","tags":["User"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/Course"}}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/user/lessons":{"get":{"parameters":[],"description":"List all lessons for the user","tags":["User"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/Lesson"}}},"401":{"description":"Bearer invalid"}},"consumes":["application/json"],"security":[{"JWT":[]}]}},"/user/replacementlessons":{"get":{"parameters":[],"description":"List all replacement lessons for the user","tags":["User"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/ReplacementLesson"}}},"401":{"description":"Bearer invalid"}},"consumes":["application/json"],"security":[{"JWT":[]}]}},"/user/announcements":{"get":{"parameters":[],"description":"Lists all Announcements for the user","tags":["User"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/Announcement"}}},"401":{"description":"Bearer invalid"}},"consumes":["application/json"],"security":[{"JWT":[]}]}},"/user/exams":{"get":{"parameters":[],"description":"Lists all exams for the user or if teacher, for his courses","tags":["User"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/Exam"}}},"401":{"description":"Bearer invalid"}},"consumes":["application/json"],"security":[{"JWT":[]}]}},"/user/devices":{"get":{"parameters":[],"description":"Lists all devices for the user","tags":["User"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/Device"}}},"401":{"description":"Bearer invalid"}},"consumes":["application/json"],"security":[{"JWT":[]}]},"post":{"parameters":[{"name":"Device","in":"body","description":null,"required":false,"schema":{"$ref":"#/definitions/Device"}}],"description":"Adds a new device to the user","tags":["User"],"responses":{"401":{"description":"Bearer invalid"}},"consumes":["application/json"],"security":[{"JWT":[]}]}},"/user/devices/test":{"get":{"parameters":[],"description":"Sends a test message to all devices","tags":["User"],"responses":{"200":{"description":""},"401":{"description":"Bearer invalid"}},"consumes":["application/json"],"security":[{"JWT":[]}]}},"/user/devices/deviceId/{id}":{"delete":{"parameters":[],"description":"Removes a device from the user account","tags":["User"],"responses":{"200":{"description":"Success"},"401":{"description":"Bearer invalid"}},"consumes":["application/json"],"security":[{"JWT":[]}]}},"/user/jwt":{"delete":{"parameters":[],"description":"Deletes access jwt","tags":["User"],"responses":{"200":{"description":""},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/user/moodle/enable":{"get":{"parameters":[],"description":"Enables the Moodle user account","tags":["User"],"responses":{"200":{"description":"OK"},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/user/moodle/disable":{"get":{"parameters":[],"description":"Disables the Moodle user account","tags":["User"],"responses":{"200":{"description":"OK"},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/users/":{"get":{"parameters":[],"description":"Returns all users","tags":["Users"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/User"}}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/users/type/{type}":{"get":{"parameters":[],"description":"Returns all users by a specific type","tags":["Users"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/User"}}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/users/username/{username}":{"get":{"parameters":[],"description":"Returns user specified by username","tags":["Users"],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/User"}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/users/id/{id}":{"get":{"parameters":[],"description":"Returns user specified by id","tags":["Users"],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/User"}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/users/find":{"post":{"parameters":[{"name":"UserFilter","in":"body","description":null,"required":true,"schema":{"$ref":"#/definitions/UserFilter"}}],"description":"Returns all users from the connected Ldap server","tags":["Users"],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/User"}}},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/users/username/{username}/courses":{"post":{"parameters":[{"name":"Course","in":"body","description":null,"required":false,"schema":{"type":"array","items":{"$ref":"#/definitions/Course"}}}],"description":"Sets courses for student","tags":["Users"],"responses":{"200":{"description":""},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/users/reload/teacher/":{"get":{"parameters":[],"description":"Loads all teachers from AD Server -- FOR TESTING ONLY","tags":["Users"],"responses":{"200":{"description":"OK"},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/users/reload/students":{"get":{"parameters":[],"description":"Loads all students from AD Server -- FOR TESTING ONLY","tags":["Users"],"responses":{"200":{"description":"OK"},"401":{"description":"Bearer invalid"}},"security":[{"JWT":[]}]}},"/user/totp/register":{"get":{"parameters":[],"description":"Returns a new totp key for secondFactor auth","tags":["User"],"responses":{"200":{"description":"Success"},"401":{"description":"Bearer invalid"},"423":{"description":"Request locked; already obtained"}},"consumes":["application/json"],"security":[{"JWT":[]}]},"post":{"parameters":[{"name":"TotpAddRequest","in":"body","description":null,"required":false,"schema":{"$ref":"#/definitions/ValidationRequest"}}],"description":"Submits a new totp key for secondFactor auth","tags":["User"],"responses":{"200":{"description":"Success"},"401":{"description":"Bearer invalid"}},"consumes":["application/json"],"security":[{"JWT":[]}]}},"/user/totp/abort":{"get":{"parameters":[],"description":"Terminates a active registration phase","tags":["User"],"responses":{"200":{"description":"Success"},"401":{"description":"Bearer invalid"},"423":{"description":"Request locked; no registration phase active"}},"consumes":["application/json"],"security":[{"JWT":[]}]}},"/user/totp":{"delete":{"parameters":[],"description":"Disables and removes the totp","tags":["User"],"responses":{"200":{"description":"Success"},"401":{"description":"Bearer invalid"}},"consumes":["application/json"],"security":[{"JWT":[]}]}}},"definitions":{"Course":{"required":["grade","subject","group","teacherId"],"properties":{"id":{"type":"number","description":""},"grade":{"type":"string","description":""},"subject":{"type":"string","description":""},"group":{"type":"string","description":""},"teacherId":{"type":"string","description":""}}},"CourseSearch":{"required":[],"properties":{"teacher":{"type":"string","description":""},"weekday":{"type":"number","description":""},"lesson":{"type":"number","description":""}}},"Announcement":{"required":[],"properties":{"id":{"type":"number","description":""}}},"RoomLink":{"required":["date","from","to","room"],"properties":{"date":{"type":"string","description":""},"from":{"type":"string","description":""},"to":{"type":"string","description":""},"room":{"type":"string","description":""},"id":{"type":"number","description":""}}},"Exam":{"required":[],"properties":{"id":{"type":"number","description":""},"course":{"$ref":"#/definitions/Course"},"date":{"type":"string","description":""},"from":{"type":"string","description":""},"to":{"type":"string","description":""},"teacher":{"type":"string","description":""},"uniqueIdentifier":{"type":"string","description":""},"roomLink":{"$ref":"#/definitions/RoomLink"}}},"ReplacementLesson":{"required":[],"properties":{"course":{"$ref":"#/definitions/Course"},"teacher":{"type":"string","description":""},"lessonId":{"type":"number","description":""},"room":{"type":"string","description":""},"subject":{"type":"string","description":""},"info":{"type":"string","description":""},"date":{"type":"string","description":""}}},"LoginRequest":{"required":["username","password"],"properties":{"username":{"type":"string","description":""},"password":{"type":"string","description":""}}},"LoginResponse":{"required":["token","userType"],"properties":{"token":{"type":"string","description":""},"userType":{"type":"number","description":""}}},"Device":{"required":["platform","userId","timeAdded","deviceIdentifier"],"properties":{"id":{"type":"number","description":""},"platform":{"type":"string","description":""},"userId":{"type":"number","description":""},"timeAdded":{"type":"string","description":""},"deviceIdentifier":{"type":"string","description":""},"verified":{"type":"boolean","description":""}}},"UserFilter":{"required":[],"properties":{"firstName":{"type":"string","description":""},"lastName":{"type":"string","description":""},"username":{"type":"string","description":""}}},"Permissions":{"required":[],"properties":{"users":{"type":"boolean","description":""},"usersAdmin":{"type":"boolean","description":""},"replacementLessons":{"type":"boolean","description":""},"replacementLessonsAdmin":{"type":"boolean","description":""},"announcements":{"type":"boolean","description":""},"announcementsAdmin":{"type":"boolean","description":""},"timeTable":{"type":"boolean","description":""},"timeTableAdmin":{"type":"boolean","description":""},"moodle":{"type":"boolean","description":""},"moodleAdmin":{"type":"boolean","description":""},"globalAdmin":{"type":"boolean","description":""}}},"User":{"required":["firstName","lastName","displayName","username","type"],"properties":{"id":{"type":"number","description":""},"firstName":{"type":"string","description":""},"lastName":{"type":"string","description":""},"displayName":{"type":"string","description":""},"username":{"type":"string","description":""},"type":{"type":"UserType","description":""},"courses":{"type":"array","items":{"$ref":"#/definitions/Course"}},"devices":{"type":"number","description":""},"secondFactor":{"type":"number","description":""},"permissions":{"$ref":"#/definitions/Permissions"},"moodleUID":{"type":"number","description":""}}},"Lesson":{"required":[],"properties":{"id":{"type":"number","description":""},"course":{"$ref":"#/definitions/Course"},"lessonNumber":{"type":"number","description":""},"day":{"type":"number","description":""},"room":{"type":"string","description":"/"}}}},"responses":{},"parameters":{},"tags":[{"name":"Announcements","description":""},{"name":"Courses","description":""},{"name":"Exams","description":""},{"name":"Lessons","description":""},{"name":"ReplacementLesson","description":""},{"name":"User","description":""},{"name":"Users","description":""}]}
